# 開発の準備（セットアップ）

Ponkan3でゲーム開発を始めるための準備をします。

## Ponkan3の入手

Ponkan3の最新版はGitHubで公開しています。

以下のリンクから、最新版のzipファイルをダウンロードしてください。

[Ponkan3最新版](https://github.com/okayumoka/ponkan3/archive/master.zip)

Gitが使える方は `git clone` したほうが最新版へ更新しやすいのでそちらのほうが良いです。

```sh
$ git clone https://github.com/okayumoka/ponkan3.git
```

## Node.jsの導入

開発環境として、Node.jsが必要です。

以下の公式サイトからダウンロードし、インストーラにしたがって導入してください。

LTS版（長期サポートの安定板）と最新版がありますが、どちらを導入しても構いません。
こだわりがなければLTS版が良いかと思います。

[Node.js 日本語サイト](https://nodejs.org/ja/)

インストール自体は、基本的にはデフォルト設定のまま進めたので問題ありませんが、
詳細に知りたい方は以下のページを参照してください。

* [Node.js導入（Windows）](./setup_nodejs_win.md)


## 新しいゲームを作成する

新しいゲーム用に、Ponkan3関連のファイルをコピーします。

あらかじめ、コピーをするためのスクリプトが用意されていますので、それを利用します。

### Windowの場合

`tools/new_game.bat` をダブルクリックして実行してください。
途中、 `Game folder name: ` と表示されたら、新しいゲーム用のフォルダ名を入力してください。
（アルファベットを推奨します。できれば日本語は避けたほうが良いです。）

### Mac, Linuxの場合

`tools/new_game.sh` をターミナルから実行してください。
途中、 `Game directory name: ` と表示されたら、新しいゲーム用のフォルダ名を入力してください。
（アルファベットを推奨します。できれば日本語は避けたほうが良いです。）

## ディレクトリを移動する

正常に生成できれば、 `games` に指定した名前でゲーム用ファイルがコピーされています。

このまま `games` ディレクトリで作業してもよいですが、どこかわかりやすい位置にディレクトリごと移動させておいたほうが良いでしょう。

フォルダごとどこか好きな場所に移動して、作業を開始しましょう。


## サンプルゲーム起動

`setup.bat` または `setup.sh` を実行すると、サンプルゲームがブラウザで起動します。

（補足：環境によってブラウザが開かれないことがあります。
その場合は、ブラウザで `http://localhost:8080/index.html` を開いてください。）

サンプルゲームは、Ponkan3の色々な機能を実際に試してみることができます。ぜひ一通り遊んでみてください。


## ディレクトリの構成

作成した新しいゲームディレクトリの中で、は、以下のような構成になっています。

- \[DIR\] node_modules
    - 生成直後には存在せず、初回起動時に生成されます。Node.jsのライブラリなどが格納されます。
- \[DIR\] public
    - ゲーム本体のファイルが格納されています。
- \[FILE\] package-lock.json
    - Node.js用のファイルです。
- \[FILE\] package.json
    - Node.js用のファイルです。
- \[FILE\] start.bat
    - Windows用の起動スクリプトです。
- \[FILE\] start.sh
    - Mac、Linux用の起動スクリプトです。

`public` の下は、以下のような構成になっています。

- public
    - \[DIR\] fonts
        - ゲームで使うフォントファイルが格納されています。
    - \[DIR\] gamedata
        - ゲームのスクリプト、画像、音声などのリソースファイルがここに格納されています。
          フォント以外のファイルはすべてここに格納します。
    - \[FILE\] index.html
        - Ponkan3のゲームを表示するためのhtmlファイルです。
    - \[FILE\] ponkan3.js
        - Ponkan3の本体です。
    - \[FILE\] sample-game.js
        - サンプルゲームの設定ファイルです。
