<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Ponkan3 Sample</title>
    <style>
      @font-face {
        font-family: 'mplus-1m-regular';
        src: url('./fonts/mplus-1m-regular.woff') format('woff')
      }
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #000000;
      }
      .ponkan-game-wrapper {
        position: relative;
        display: block;
        padding: 0;
        width: 100%;
        height: 100%;
      }
      .ponkan-game-wrapper canvas {
        position: absolute;
        top: 0;
        left: 0;
        margin: auto auto;
        transform-origin: 0 0;
      }
    </style>
  </head>
  <body>
    <div id="game" class="ponkan-game-wrapper"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script src="./ponkan3.js"></script>
    <script>
      Ponkan3.Logger.level = Ponkan3.Logger.LEVEL_DEBUG;
      var width = 1280;
      var height = 720;
      var ponkan = new Ponkan3("game", {
        gameDataDir: "./gamedata",
        saveDataPrefix: "ponkan-sample",
        width: width,
        height: height,
        soundBufferCount: 5,

        screenShot: {
          width: 231,
          height: 130,
          nodata: "image/nodata.png",
        },

        // デフォルトのレイヤ設定
        // layersDefault: {},

        // 履歴レイヤ
        history: {
          backgroundImage: "image/history.png",
          wheelScrollCount: 3,   // マウスホイールのスクロール量
          // テキスト表示部分
          text: {
            x: 190,
            y: 130,
            width: 900,
            height: 500,
            textFontFamily: ["mplus-1m-regular"],
            textFontSize: 26,
            textPitch: -1,
            textLineHeight: 26,
            textLinePitch: 7,
            textMarginTop: 0,
            textMarginRight: 0,
            textMarginBottom: 0,
            textMarginLeft: 0,
            // scrollOffLines: 3,  // 上下のスクロールボタンで、指定した行の分は重複させる
          },
          // 上スクロールボタン
          upButton: {
            x: width - 24 - 150,
            y: 130,
            width: 24,
            height: 24,
            textColor: 0x888888,
            textFontSize: 10,
            textLineHeight: 10,
            bgColors: [0xFFFFFF, 0xFFFFFF, 0xFFFFFF],
            bgAlphas: [1.0, 1.0, 1.0]
          },
          // 下スクロールボタン
          downButton: {
            x: width - 24 - 150,
            y: 130 + 500 - 24,
            width: 24,
            height: 24,
            textColor: 0x888888,
            textFontSize: 10,
            textLineHeight: 10,
            bgColors: [0xFFFFFF, 0xFFFFFF, 0xFFFFFF],
            bgAlphas: [1.0, 1.0, 1.0]
          },
          // スクロールバー
          scrollBar: {
            x: width - 24 - 150,
            y: 130 + 24 + 1,
            width: 24,
            height: 500 - 24 - 24 - 2,
            textColor: 0x888888,
            backgroundColor: 0xFFFFFF,
            backgroundAlpha: 0.5,
            bgColors: [0xFFFFFF, 0xFFFFFF, 0xFFFFFF],
            bgAlphas: [1.0, 1.0, 1.0]
          },
          // 閉じるボタン
          closeButton: {
          }
        }
      });
      WebFont.load({
        classes: false,
        custom: { families: ["mplus-1m-regular"] },
        active: function() {
          console.log("WebFont: ", "active.");
          ponkan.start();
        },
        inactive: function() {
          console.log("WebFont: ", "inactive.");
          alert("フォントの読み込みに失敗");
        },
      });
    </script>
  </body>
</html>

